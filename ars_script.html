<script type="text/javascript">
function ArsAB() {
  this.ajaxurl = '/services/ars-ajax-handler.php';
  this.setuid = function() {
    return (Math.random() + 1).toString(36).substring(2,7);
  };
  this.setgroup = function() {
    return String.fromCharCode(Math.floor(Math.random() * 2) + 65).toLowerCase();
  };
  this.getcookie = function(name) {
    var nameEQ = name + "=";
    var ca = document.cookie.split(';');
    for(var i=0;i < ca.length;i++) {
      var c = ca[i];
      while (c.charAt(0)==' ') c = c.substring(1,c.length);
      if (c.indexOf(nameEQ) == 0) {
        var str = c.substring(nameEQ.length,c.length);
        var arr = str.split('_');
        if (arr.length == 2 && arr[0].length > 1 && arr[0].length < 10 && (arr[1] == 'a' || arr[1] == 'b')) {
          this.uid = arr[0];
          this.group = arr[1];
          // console.log('success ' + this.uid);
          return true;
        }
      }
    }
    return false;
  };
  this.deletecookie = function(name) {
    this.setcookie(name, '', -1);
  };
  this.setcookie = function(name, value, minutes) {
    if (minutes) {
      var date = new Date();
      date.setTime(date.getTime() + (minutes * 60 * 1000));
      var expires = "; expires=" + date.toGMTString();
    }
    else var expires = "";
    document.cookie = name+"="+value+expires+"; path=/";
  };
  this.impression = function(post_id) {
    // Send fake ajax
    var params = {
      nonce:        'aae11bffb1',
      action:       'ars_ab_impression',
      id:           post_id,
      group:        this.group,
      uid:          this.uid,
      ts:           (new Date()).getTime()
    };
    var url = this.ajaxurl + '?' + this.encodeparams(params);
    document.write('\x3Cscript type="text/javascript" src="' + url + '">\x3C/script>');
  };
  this.click = function(post_id) {
    // Send fake ajax
    var params = {
      nonce:        '20d89b7fb5',
      action:       'ars_ab_click',
      id:           post_id,
      group:        this.group,
      uid:          this.uid,
      ts:           (new Date()).getTime()
    };
    var url = this.ajaxurl + '?' + this.encodeparams(params);
    document.write('\x3Cscript type="text/javascript" src="' + url + '">\x3C/script>');
  };
  this.settitle = function(post_id) {
    if (this.group == 'b') {
      var span = document.getElementById('ars_ab_' + post_id);
      var title = span.parentNode;
      title.innerHTML = span.getAttribute('data-title-b');
    }
  };
  this.encodeparams = function(data) {
    var ret = [];
    for (var d in data)
      ret.push(encodeURIComponent(d) + "=" + encodeURIComponent(data[d]));
    return ret.join("&");
  };

  this.uid = this.setuid();
  this.group = this.setgroup();

  // Try to get values from cookie - if no cookie yet, set it
  if (!this.getcookie('ars_ab')) {
    this.deletecookie('ars_ab');
    this.setcookie('ars_ab', this.uid + '_' + this.group, 60);
  }
}
ars_ab = new ArsAB();
ars_ab.impression(994279);</script>NES Classic joins the “can it run Linux” club, has custom distro installed<span id="ars_ab_994279" data-title-b="Hacker installs custom Linux distro on NES Classic"></span><script type="text/javascript">ars_ab.settitle(994279);</script>